<!DOCTYPE html>
<!-- ------------------------------------------------------------------------------- -->
<!--                                   Projet Squaro                                 -->
<!-- ------------------------------------------------------------------------------- -->
<!-- Logique propositionnelle et logique du premier ordre appliqué au jeu du Squaro  -->
<!--                        JACOB Julien, HECKMANN Victor                            -->
<!-- ------------------------------------------------------------------------------- -->

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<title>Walker-SAT | SAT Solveur en ligne codé en JS</title>

		<script type="text/javascript" src="js/WalkSat.js"></script>

		<!-- Bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<link href="css/style.css" rel="stylesheet">
	</head>
	<body>
		
		<div class="jumbotron">
		  	<div class="container">
					 <h1>WalkSat  <small>SAT-Solver, Résoluton de clauses logiques</small></h1>
					<p>Un SAT-Solver est un outil destiné à la résolution de <a href="">problèmes SAT</a>, c'est à dire de problèmes de décision logique propositionnelle présentés sous la forme d'un ensemble de clauses. </p>

		  </div>
		</div>	

		<div class="container">
			<div class="col-md-6">


						<h2>Paramètres du WalkSat :</h2><hr>


							<textarea rows='10' cols='50' id="textareaDimacs" class="form-control" >
 p cnf 
-1 -2 -4 -5
-1 -2 -4  5
-1 -2  4 -5
-1 -2  4  5
-1  2 -4 -5
-1  2 -4  5
-1  2  4 -5
1 -2 -4 -5
1 -2 -4  5
1 -2  4 -5
1  2 -4 -5
1  2  4  5

							</textarea><br>


							<div class="collapse" id="options">
							<div class="form-group">

								<div class="checkbox">
							    <label>
							      <input type="checkbox" name="WalkSatOption1" id="WalkSatOption1" checked/> Gérer les clauses valides
							    </label>
							    <br />
							    <label>
							      <input type="checkbox" name="WalkSatOption2" id="WalkSatOption2" checked/> Eliminer les clauses en double
							    </label>
							    <br />
							    <label>
							      <input type="checkbox" name="WalkSatOption3" id="WalkSatOption3" checked/> Repérer les contradictions de clauses unitaires
							    </label>
							    <br />
							    <label>
							      <input type="checkbox" name="WalkSatOption4" id="WalkSatOption4" checked/> Sauvegarde des assignations déjà testées.
							    </label>
							    <br />
							  </div>
						  </div>

						  <div class="form-group">
						    <label for="nombreIterationsMax">Nombre d'itérations maximum : </label>
						    <input type="number" value="25000" min="1" id="nombreIterationsMax" class="form-control" />
						  </div>

						  <div class="form-group">
						    <label for="WalkSatSeuil">Seuil : </label>
						    <input type="number" value="50" min="1" max="100" id="WalkSatSeuil" class="form-control" />
						  </div>
						  <br/>
						</div>


						<p class="text-right">
							<a class="btn btn-success" onclick="lancerResolution();"> Lancer la résolution </a>

							<a class="btn btn-primary" role="button" data-toggle="collapse" href="#options" aria-expanded="false" aria-controls="options"> Options </a>
						</p>

					</div> <!-- fin des parametres -->


					<div class="col-md-6">
						<h2>Résolution : </h2><hr>
						<div id="divSolution"></div>
					</div>

				</div>

				<div class="container">
					<footer>
						<p class="text-center">Hello Footer !</p>
					</footer>
				</div>
				

			

		<script type="text/javascript">
		var xx;

			function lancerResolution () {

				WalkSatOptions["clauseUnitaire"]                = document.getElementById("WalkSatOption1").checked;
				WalkSatOptions["eliminationClausesDoubles"]     = document.getElementById("WalkSatOption2").checked;
				WalkSatOptions["ContradictionClausesUnitaires"] = document.getElementById("WalkSatOption3").checked;
				WalkSatOptions["SauvegardeAssignationsTestees"] = document.getElementById("WalkSatOption4").checked;
				WalkSat_nbIterartionsMax = parseInt(document.getElementById("nombreIterationsMax").value) || 25000; 
				walksat_seuil = parseInt(document.getElementById("WalkSatSeuil").value) || 50;
				
				var dimacs = document.getElementById("textareaDimacs").value;

				var solution = WalkSat(dimacs);

				var log = "";
				log += "<dl class='dl-horizontal'>";
				log += "	<dt>Nombre d'itérations : </dt><dd>" + WalkSatLOG["iterationWalkSat"] +"</dd>";
				log += "	<dt>Temps d'exécution : 	</dt><dd>" + WalkSatLOG["tempsExecution"]   +" Ms</dd>";
				log += "</dl>";

				if (WalkSatLOG["messageErreur"]) {
					log += '<div class="alert alert-danger" role="alert"><strong>Message d\'erreur : </strong>'+ WalkSatLOG["messageErreur"] +'</div>';
				}

				document.getElementById("divSolution").innerHTML =  log + "<br>";

				var solutionNum = "";
				if (WalkSatLOG["messageErreur"] == "") {
					for (var i = 1; i <= solution.length; i++) {
						if (!solution[i]) {solutionNum += " -";}
						solutionNum += i + " ";
					}
				}

				document.getElementById("divSolution").innerHTML +=  "<p>" + solutionNum +"</p>";

			}

		</script>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>
	</body>
</html>