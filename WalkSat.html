<!DOCTYPE html>

<!-- ------------------------------------------------------------------------------ -->
<!--                                   Projet Squaro                                -->
<!-- ------------------------------------------------------------------------------ -->
<!-- Logique propositionnelle et logique du premier ordre appliqué au jeu du Squaro -->
<!--                JACOB Julien, HECKMANN Victor et ?????? Thomas                  -->
<!-- ------------------------------------------------------------------------------ -->
<!--  Analyse d'une exécution de squaro                                             -->
<!-- ------------------------------------------------------------------------------ -->

<html>
  <head>
    <title>Squaro - Projet INF 242</title>
    <meta charset="utf-8" />
    <meta name="description" content="projet Suaro - Logique propositionnelle et SAT-Solver">
    <meta name="author" content="JACOB Julien, Victor HECKMANN">
    <LINK href="style.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/WalkSat.js"></script>
  </head>

  <body>
  <header>
    <h1>INF 242 - Projet Squaro</h1>
    <span>Réaliser par <b>JACOB Julien</b> et <b>HECKMANN Victor.</b></span>
    <hr>
  </header>

  <h2>Paramètres du WalkSat :</h2><hr>
  <p>
       <input type="checkbox" name="WalkSatOption1" id="WalkSatOption1" checked/> 
       <label for="WalkSatOption1"> Gérer les clauses valides.</label>
       <br />
       <input type="checkbox" name="WalkSatOption2" id="WalkSatOption2" checked/> 
       <label for="WalkSatOption2"> Eliminer les clauses en double.</label>
       <br />
       <input type="checkbox" name="WalkSatOption3" id="WalkSatOption3" checked/> 
       <label for="WalkSatOption3"> Repérer les contradictions de clauses unitaires. </label>
       <br />
       <input type="checkbox" name="WalkSatOption4" id="WalkSatOption4" checked/> 
       <label for="WalkSatOption4"> Sauvegarde des assignations déjà testées.</label>
   </p>
   <p>Nombre d'itérations maximum : <input type="number" value="25000" min="1" id="nombreIterationsMax" /></p>
   <p>Seuil P : <input type="number" value="50" min="0" max="100" id="WalkSatSeuil" /></p>

  <textarea rows='10' cols='50' id="textareaDimacs">
 p cnf 9 46
-1 -2 -4 -5
-1 -2 -4  5
-1 -2  4 -5
-1 -2  4  5
-1  2 -4 -5
-1  2 -4  5
-1  2  4 -5
1 -2 -4 -5
1 -2 -4  5
1 -2  4 -5
1  2 -4 -5
1  2  4  5

  </textarea><br>

  <p><button onclick="lancerResolution();">Lancer la résolution.</button></p>

  <br><hr><h2>Résolution : </h2><hr>
  <div id="divSolution"></div>
  <br><br>
  

  <script type="text/javascript">
  var xx;

    function lancerResolution () {

      WalkSatOptions["clauseUnitaire"]                = document.getElementById("WalkSatOption1").checked;
      WalkSatOptions["eliminationClausesDoubles"]     = document.getElementById("WalkSatOption2").checked;
      WalkSatOptions["ContradictionClausesUnitaires"] = document.getElementById("WalkSatOption3").checked;
      WalkSatOptions["SauvegardeAssignationsTestees"] = document.getElementById("WalkSatOption4").checked;
      WalkSat_nbIterartionsMax = parseInt(document.getElementById("nombreIterationsMax").value) || 25000; 
      walksat_seuil = parseInt(document.getElementById("WalkSatSeuil").value) || 50;
      
      var dimacs = document.getElementById("textareaDimacs").value;

      var solution = WalkSat(dimacs);

      var log = "";
      log += "<table>";
      log += "<tr><td>Nombre d'itérations : </td><td>"+ WalkSatLOG["iterationWalkSat"] +"</td></tr>";
      log += "<tr><td>Temps d'exécution en Ms : </td><td>"+ WalkSatLOG["tempsExecution"] +"</td></tr>";
      log += "<tr><td>Message d'erreur : </td><td>"+ WalkSatLOG["messageErreur"] +"</td></tr>";
      log += "</table>";

      document.getElementById("divSolution").innerHTML =  log + "<br>" + solution;

      var solutionNum = "";
      if (WalkSatLOG["messageErreur"] == "") {
        for (var i = 1; i <= solution.length; i++) {
          if (!solution[i]) {solutionNum += " -";}
          solutionNum += i + " ";
        }
      }
      document.getElementById("divSolution").innerHTML +=  "<br><br>" + solutionNum;

    }

  </script>
	

  </body>

</html>